<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Hannah Questions â€” Fill in the Blanks</title>
<style>
  :root{
    --bg:#f7f9fc; --card:#ffffff; --text:#1f2937; --muted:#6b7280;
    --ok:#16a34a; --warn:#ef4444; --brand:#2563eb;
    --shadow:0 10px 25px rgba(0,0,0,.08); --radius:18px;
  }
  *{box-sizing:border-box}
  html,body{margin:0}
  body{
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial;
    background:url('../../imagens/fundo.png') center/cover no-repeat, var(--bg);
    color:var(--text);
  }
  .app{
    width:100%;
    max-width:980px;
    margin: 12px auto 24px auto;
    background:var(--card);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    padding:16px;
    position:relative;
    overflow:visible;
  }

  /* ===== Back separado ===== */
  #back-button{
    position:relative;
    margin-bottom:8px;
    border:none; background:#eef2ff; color:#0f3ea8;
    padding:8px 12px; border-radius:10px; font-weight:700; cursor:pointer;
    box-shadow:0 6px 14px rgba(0,0,0,.06);
  }
  #back-button:active{ transform: translateY(1px); }

  /* ===== Header ===== */
  .header{
    display:grid;
    grid-template-columns:auto 1fr auto;
    align-items:center;
    gap:12px;
    margin-bottom:12px;
  }
  .avatar{
    width:48px;height:48px;border-radius:50%;
    background:#e5f0ff;border:2px solid #cfe0ff;
    display:flex;align-items:center;justify-content:center;overflow:hidden;
  }
  .avatar img{width:100%;height:100%;object-fit:contain;border-radius:50%;display:block}
  .title-wrap{min-width:0}
  .title{font-weight:800;font-size:20px;line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .subtitle{color:var(--muted);font-size:14px;line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .progress{height:8px;background:#eef2f7;border-radius:999px;overflow:hidden;margin-top:8px}
  .progress > div{height:100%;width:0%;background:linear-gradient(90deg,#60a5fa,#34d399);transition:width .3s ease}

  .badge{
    max-width: 42ch;
    background:#eef2ff;border:1px solid #d7defc;color:#3949ab;
    padding:8px 10px;border-radius:999px;font-size:12px;line-height:1;
    white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
  }

  /* ===== Question ===== */
  .stage{display:grid;gap:16px}
  .question-card{background:#f9fbff;border:1px solid #e5eaf5;border-radius:16px;padding:14px}
  
  /* agora texto ocupa largura total e imagem vem depois */
  .q-top{display:flex;flex-direction:column;gap:14px}
  .q-prompt{font-size:22px;font-weight:800;line-height:1.3;word-break:break-word}
  .q-media{width:100%;aspect-ratio:16/10;background:#eef4ff;border:1px dashed #cfe0ff;border-radius:14px;padding:8px;overflow:hidden;display:block}
  .q-media img{width:100%;height:100%;object-fit:contain;display:block}
  @supports not (aspect-ratio:16/10){.q-media{height:220px}}

  .q-controls{display:flex;gap:8px;align-items:center;margin-top:8px;flex-wrap:wrap}
  .icon-btn{border:none;background:#e6f0ff;color:#0f3ea8;padding:10px 12px;border-radius:12px;cursor:pointer;font-weight:700}
  .icon-btn:active{transform:translateY(1px)}

  .options{display:grid;gap:10px;margin-top:6px;grid-template-columns:repeat(2,minmax(0,1fr))}
  .option{display:flex;align-items:center;gap:12px;background:#fff;border:2px solid #e9eef7;border-radius:18px;padding:12px;cursor:pointer;user-select:none;min-height:78px;box-shadow:0 4px 12px rgba(0,0,0,.03);transition:transform .06s ease,border-color .15s ease,box-shadow .15s ease}
  .option:hover{transform:translateY(-1px);box-shadow:0 8px 18px rgba(0,0,0,.06)}
  .option:active{transform:translateY(0)}
  .option .thumb{width:60px;height:60px;border-radius:14px;background:#f3f6ff;border:1px solid #e6ecfb;overflow:hidden;display:flex;align-items:center;justify-content:center;font-size:30px;flex:0 0 60px}
  .option .thumb img{width:100%;height:100%;object-fit:contain;padding:6px;display:block}
  .option .label{font-size:19px;font-weight:800;letter-spacing:.2px;word-break:break-word}

  /* Blank responsivo */
  .blank{
    display:inline-block;
    vertical-align:baseline;
    width:clamp(2ch, 6ch, 11ch);
    height:1.05em;
    border-bottom:3px solid #cfe0ff;
    margin:0 .3em;
  }

  .footer{margin-top:8px;display:flex;justify-content:space-between;align-items:center;gap:8px;flex-wrap:wrap}
  .pill{background:#eef2ff;color:#3949ab;padding:8px 12px;border-radius:999px;font-size:12px;border:1px solid #d7defc}
  .next-btn{border:none;background:linear-gradient(90deg,#3b82f6,#22c55e);color:#fff;font-weight:800;padding:12px 16px;border-radius:14px;cursor:pointer;box-shadow:0 10px 18px rgba(34,197,94,.25);opacity:.3;pointer-events:none;transition:opacity .2s ease,transform .06s ease}
  .next-btn.ready{opacity:1;pointer-events:auto}

  @media (max-width:720px){
    .options{grid-template-columns:1fr}
    .q-prompt{font-size:20px}
    .badge{grid-column:1/-1;max-width:100%}
  }
</style>
</head>
<body>
  <div class="app" id="app">
    <button id="back-button" onclick="goBack()">Back</button>

    <div class="header">
      <div class="avatar" id="avatar">ðŸ¤–</div>
      <div class="title-wrap">
        <div class="title">Hannah Questions</div>
        <div class="subtitle" id="subtitle">Loading contentâ€¦</div>
        <div class="progress"><div id="bar"></div></div>
      </div>
      <div class="badge" id="pill">Unit â€”</div>
    </div>

    <div class="stage">
      <div class="question-card">
        <div class="q-top">
          <div>
            <div class="q-prompt" id="prompt">â€”</div>
            <div class="q-controls">
              <button class="icon-btn" id="btnPlayPrompt">ðŸ”Š Listen</button>
              <button class="icon-btn" id="btnRepeat">ðŸŽ¤ Repeat</button>
            </div>
          </div>
          <div class="q-media" id="mediaBox"></div>
        </div>
        <div class="options" id="options"></div>
        <div class="footer">
          <span class="pill" id="statusPill">Question â€”/â€”</span>
          <button class="next-btn" id="btnNext" disabled>Next</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts Firebase + lÃ³gica (idÃªnticos ao anterior) -->
  <!-- ... (todo o JS de Firebase, carregamento de questÃµes, Ã¡udio, progresso, confete, etc. permanece intacto) ... -->

</body>
</html>
