<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hannah English Course</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase Configuration and Initialization -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDGgo2H_hDKXF88xN7XnLFNUj8ikMY7Xdc",
            authDomain: "hannahenglishcourse.firebaseapp.com",
            projectId: "hannahenglishcourse",
            storageBucket: "hannahenglishcourse.appspot.com",
            messagingSenderId: "449818788486",
            appId: "1:449818788486:web:8a49d3f68591e6fb3f0707",
            measurementId: "G-07VVJG9LRS",
            databaseURL: "https://hannahenglishcourse-default-rtdb.asia-southeast1.firebasedatabase.app"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        // Test Firebase connection
        firebase.database().ref('/').once('value')
          .then((snapshot) => {
            console.log('Database connected:', snapshot.val());
          })
          .catch((error) => {
            console.error('Error connecting to database:', error);
          });

        // Função para verificar o papel do usuário e liberar todas as fases se for professor ou proprietário
        function liberarTodasFasesSeProfessorOuProprietario() {
            firebase.auth().onAuthStateChanged(user => {
                if (user) {
                    // Obtém o papel do usuário do banco de dados
                    const userRef = firebase.database().ref(`usuarios/${user.uid}/role`);
                    userRef.once('value').then(snapshot => {
                        const role = snapshot.val();
                        if (role === 'professor' || role === 'proprietario') {
                            // Lógica para liberar todas as fases
                            liberarTodasAsFases();
                        }
                    });
                }
            });
        }

        // Função para liberar todas as fases
        function liberarTodasAsFases() {
            // Adicione aqui a lógica específica para liberar todas as fases (ajuste conforme a estrutura do seu jogo)
            console.log('Todas as fases foram liberadas.');
            // Exemplo: liberar todas as fases visualmente
            const fases = document.querySelectorAll('.fase-bloqueada');
            fases.forEach(fase => {
                fase.classList.remove('fase-bloqueada');
                fase.classList.add('fase-desbloqueada');
            });
        }

        // Chamar a função ao carregar a página
        window.addEventListener('load', liberarTodasFasesSeProfessorOuProprietario);
    </script>
</head>
<body>

    <!-- Botão Back -->
    <a href="javascript:history.back()" class="back-button">Back</a>

    <div class="map-container" id="mapContainer">
        <!-- Imagem de título centralizada sobre o fundo -->
        <div class="title-container">
            <img src="../../imagens/titulo.png" alt="Hannah English Course" class="title-image">
        </div>

        <!-- SVG para as linhas -->
        <svg id="linesSvg" class="lines-svg"></svg>
    </div>

    <script src="script.js"></script>
</body>
</html>
