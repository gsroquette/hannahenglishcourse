<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indefinite Articles - The Creation Story</title>
    <style>
        /* [Same style as before] */
    </style>
</head>
<body>

<div class="container">
    <a href="javascript:history.back()" class="back-button">Back</a>
    <h1 id="title">Loading title...</h1>
    
    <div id="content">
        <!-- Dynamic content will be loaded here -->
    </div>

    <button class="btn-download" onclick="generatePDF()">Download as PDF</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
<script>
    function loadTextFile() {
        fetch('texto.txt')
            .then(response => response.text())
            .then(data => {
                const contentDiv = document.getElementById('content');
                const lines = data.split('\n');
                let currentSection = '';
                let htmlContent = '';
                
                lines.forEach(line => {
                    if (line.startsWith('Title: ')) {
                        document.getElementById('title').innerText = line.replace('Title: ', '');
                    } else if (line.startsWith('# ')) {
                        if (currentSection) {
                            htmlContent += '</div>';
                        }
                        currentSection = line.replace('# ', '');
                        htmlContent += `<div class="section"><h2>${currentSection}</h2>`;
                    } else if (line.startsWith('Subtitle: ')) {
                        htmlContent += `<h2>${line.replace('Subtitle: ', '')}</h2>`;
                    } else if (line.startsWith('Text: ')) {
                        htmlContent += `<p>${line.replace('Text: ', '')}</p>`;
                    } else if (line.startsWith('Examples from the Creation Story:')) {
                        htmlContent += `<p><strong>${line}</strong></p><ul>`;
                    } else if (line.startsWith('"')) {
                        htmlContent += `<li>${line}</li>`;
                    } else {
                        htmlContent += `<p>${line}</p>`;
                    }
                });

                contentDiv.innerHTML = htmlContent + '</div>';
            })
            .catch(error => console.error('Error loading the text file:', error));
    }

    function generatePDF() {
        fetch('texto.txt')
            .then(response => response.text())
            .then(data => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                const lines = data.split('\n');
                let y = 20;

                doc.addImage('Logo.png', 'PNG', 90, y, 30, 30); // Logo reduzida
                y += 40;
                doc.setFontSize(12);
                doc.text("Name: ____________________________  Date: _______________", 20, y);
                y += 20;

                lines.forEach(line => {
                    if (line.startsWith('Title: ')) {
                        doc.setFontSize(16);
                        doc.text(line.replace('Title: ', ''), 20, y);
                        y += 20;
                    } else if (line.startsWith('# ')) {
                        if (y > doc.internal.pageSize.height - 20) {
                            doc.addPage();
                            y = 20;
                        }
                        doc.setFontSize(14);
                        doc.text(line.replace('# ', ''), 20, y);
                        y += 10;
                    } else if (line.startsWith('Subtitle: ')) {
                        doc.setFontSize(14);
                        doc.text(line.replace('Subtitle: ', ''), 20, y);
                        y += 10;
                    } else if (line.startsWith('Text: ')) {
                        doc.setFontSize(12);
                        doc.text(line.replace('Text: ', ''), 20, y);
                        y += 10;
                    } else if (line.startsWith('Examples from the Creation Story:')) {
                        doc.setFontSize(12);
                        doc.text(line, 20, y);
                        y += 10;
                    } else if (line.startsWith('"')) {
                        doc.setFontSize(12);
                        doc.text(line, 25, y);
                        y += 10;
                    } else {
                        doc.setFontSize(12);
                        doc.text(line, 20, y);
                        y += 10;
                    }

                    if (y > doc.internal.pageSize.height - 20) {
                        doc.addPage();
                        y = 20;
                    }
                });

                doc.save("grammar_lesson_creation.pdf");
            })
            .catch(error => console.error('Error generating the PDF:', error));
    }

    document.addEventListener('DOMContentLoaded', loadTextFile);
</script>

</body>
</html>
