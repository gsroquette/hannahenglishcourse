firebase.auth().createUserWithEmailAndPassword(email, senha)
  .then(userCredential => {
    const userId = userCredential.user.uid;
    const userData = {
      email: email,
      nome: nome,
      telefone: telefone,
      role: tipo,
      progresso: tipo === 'aluno' ? {} : null,
      dataHoraCadastro: dataHora
    };
    return db.ref('usuarios/' + userId).set(userData);
  })
  .then(() => {
    alert("Usu치rio cadastrado com sucesso!");
    document.getElementById('cadastroForm').reset();
  })
  .catch(error => {
    console.error("Erro ao cadastrar usu치rio:", error);
    if (error.code === 'auth/email-already-in-use') {
      feedback.textContent = 'Este email j치 est치 sendo usado. Tente outro email.';
    } else {
      feedback.textContent = `Erro: ${error.message}`;
    }
  });
